{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../app/insights/new/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { createInsight } from \"@/lib/store\";\n\nexport default function NewInsightPage() {\n  const router = useRouter();\n\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const onSubmit = () => {\n    if (!title.trim() || !body.trim()) {\n      setError(\"Title and body are required.\");\n      return;\n    }\n\n    setSubmitting(true);\n    setError(null);\n\n    const res = createInsight({\n      title,\n      body,\n    });\n\n    if (!res.ok) {\n      setSubmitting(false);\n      setError(res.error ?? \"Failed to create insight\");\n      return;\n    }\n\n    // ✅ 核心：拿到真实 id，跳转详情页\n    router.push(`/insights/${res.insight.id}`);\n  };\n\n  return (\n    <div className=\"bpfx-bg\">\n      <main className=\"bpfx-main\">\n        <div className=\"bpfx-wrap\">\n          <div className=\"bpfx-panel\" style={{ maxWidth: 720, margin: \"0 auto\" }}>\n            <h2 className=\"bpfx-panelTitle\">New Insight</h2>\n            <p className=\"bpfx-panelText\">\n              Write a clear judgment. You can bind it to a league later.\n            </p>\n\n            <div className=\"bpfx-stack\">\n              <input\n                className=\"bpfx-input\"\n                placeholder=\"Title\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n              />\n\n              <textarea\n                className=\"bpfx-textarea\"\n                placeholder=\"Write your judgment...\"\n                rows={6}\n                value={body}\n                onChange={(e) => setBody(e.target.value)}\n              />\n\n              {error && (\n                <div style={{ color: \"#d33\", fontSize: 14 }}>{error}</div>\n              )}\n\n              <div className=\"bpfx-row\" style={{ justifyContent: \"flex-end\" }}>\n                <button\n                  className=\"bpfx-btn bpfx-btnGhost\"\n                  onClick={() => router.back()}\n                  disabled={submitting}\n                >\n                  Cancel\n                </button>\n\n                <button\n                  className=\"bpfx-btn bpfx-btnPrimary\"\n                  onClick={onSubmit}\n                  disabled={submitting}\n                >\n                  {submitting ? \"Posting...\" : \"Post\"}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml","AppRouterContext"],"mappings":"6CAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,kBAAkB,+BCFzCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,iiBCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,gBAAgB,0CCAvC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3B,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MA0BlD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,SAAU,IAAK,OAAQ,QAAS,YACnE,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2BAAkB,gBAChC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0BAAiB,+DAI9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,aACV,YAAY,QACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,IAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CACC,UAAU,gBACV,YAAY,yBACZ,KAAM,EACN,MAAO,EACP,SAAU,AAAC,GAAM,EAAQ,EAAE,MAAM,CAAC,KAAK,IAGxC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,OAAQ,SAAU,EAAG,WAAI,IAGhD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,WAAW,MAAO,CAAE,eAAgB,UAAW,YAC5D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,yBACV,QAAS,IAAM,EAAO,IAAI,GAC1B,SAAU,WACX,WAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,UAAU,2BACV,QAjEC,CAiEQ,IAhEvB,GAAI,CAAC,EAAM,IAAI,IAAM,CAAC,EAAK,IAAI,GAAI,YACjC,EAAS,gCAIX,GAAc,GACd,EAAS,MAET,IAAM,EAAM,CAAA,EAAA,EAAA,aAAA,AAAa,EAAC,OACxB,OACA,CACF,GAEA,GAAI,CAAC,EAAI,EAAE,CAAE,CACX,GAAc,GACd,EAAS,EAAI,KAAK,EAAI,4BACtB,MACF,CAGA,EAAO,IAAI,CAAC,CAAC,UAAU,EAAE,EAAI,OAAO,CAAC,EAAE,CAAA,CAAE,CAC3C,EA4CgB,SAAU,WAET,EAAa,aAAe,uBAS/C","ignoreList":[0,1,2]}